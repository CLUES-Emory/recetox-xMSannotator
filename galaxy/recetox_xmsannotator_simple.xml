<tool id="recetox_xmsannotator_simple" name="xmsannotator - simple" version="{{tool_version}}">
    <macros>
        <import>recetox_xmsannotator_macros.xml</import>
    </macros>

    <expand macro="requirements"/>

    <command detect_errors="aggressive"><![CDATA[
        Rscript -e 'annotation <- xmsannotator::simple_annotation(
                        data = arrow::read_feather("$peak_list"),
                        metabolites = rhdf5::h5read("$metabolites", "metabolites"),
                        mz_tolerance_ppm = as.double(mz_tolerance)
                   )'
                -e 'arrow::write_feather(annotation, "$annotation")'
    ]]></command>

    <inputs>
        <expand macro="peak_list"/>
        <expand macro="metabolites"/>
        <expand macro="mz_tolerance"/>
    </inputs>

    <outputs>
        <expand macro="annotation_output"/>
    </outputs>

    <help><![CDATA[]]></help>
    <expand macro="citations"/>
</tool>